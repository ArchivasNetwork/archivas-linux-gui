# Out-of-the-Box Setup - Complete ✅

## Summary

The application is now configured to work out of the box with zero user interaction required. Node and farmer start automatically on launch with sensible defaults.

## What's Implemented

### 1. Auto-Start on Launch ✅
- Node auto-starts with default config (archivas-devnet-v4, 127.0.0.1:8080, seed.archivas.ai:9090)
- Farmer auto-starts after node (1 second delay to ensure node is ready)
- No user interaction required - everything starts automatically

### 2. Default Configuration ✅
- **Network**: archivas-devnet-v4
- **RPC Bind**: 127.0.0.1:8080
- **Bootnodes**: seed.archivas.ai:9090
- **Data Directory**: ~/.archivas/data
- **Plots Path**: ~/.archivas/plots
- **Farmer Key Path**: ~/.archivas/farmer.key
- **Auto-start**: true (both node and farmer)

### 3. First-Run Setup ✅
- Creates all necessary directories automatically:
  - `~/.archivas/data` (node data)
  - `~/.archivas/plots` (farmer plots)
  - Farmer key directory
- Creates default config file if none exists
- Shows welcome message on first launch explaining auto-start
- Farmer key will be generated by farmer code on first run (when integrated)

### 4. Improved Placeholder Implementations ✅
- Node and farmer placeholders now have periodic status updates
- Added detailed integration guide comments in Go code
- Ready for actual Archivas node/farmer code integration
- Placeholders simulate running state properly

### 5. User Experience ✅
- Zero configuration required for basic usage
- Welcome message on first run
- Settings available for advanced configuration
- Manual controls (Start/Stop buttons) still available but secondary
- Primary behavior: everything auto-starts

## Configuration Files

### Default Config Location
- Linux: `~/.config/ArchivasCore/config.json` (or `~/.archivas-core/config.json`)
- Created automatically on first run

### Config Structure
```json
{
  "node": {
    "network": "archivas-devnet-v4",
    "rpc_bind": "127.0.0.1:8080",
    "data_dir": "~/.archivas/data",
    "bootnodes": "seed.archivas.ai:9090",
    "auto_start": true
  },
  "farmer": {
    "plots_path": "~/.archivas/plots",
    "farmer_privkey_path": "~/.archivas/farmer.key",
    "node_url": "http://127.0.0.1:8080",
    "auto_start": true
  },
  "rpc": {
    "url": "http://127.0.0.1:8080",
    "fallback_url": "https://seed.archivas.ai",
    "poll_interval_ms": 5000
  }
}
```

## Next Steps for Full Integration

### 1. Add Archivas Go Code
- Option A: Add as Git submodule
  ```bash
  git submodule add https://github.com/ArchivasNetwork/archivas src/go/archivas
  ```
- Option B: Copy Archivas code to `src/go/archivas/`
- Option C: Use replace directive in go.mod (if Archivas is in parent directory)

### 2. Update Go Module
Update `src/go/bridge/go.mod`:
```go
module github.com/ArchivasNetwork/archivas-core-gui/bridge

go 1.21

require (
    github.com/ArchivasNetwork/archivas v0.0.0
)

replace github.com/ArchivasNetwork/archivas => ../archivas
```

### 3. Replace Placeholder Code
- **node.go**: Replace placeholder with actual node initialization
  - Import: `github.com/ArchivasNetwork/archivas/node`, `storage`, `p2p`, `rpc`
  - Initialize storage, node state, P2P network, RPC server
  - Run in goroutine with context cancellation
  
- **farmer.go**: Replace placeholder with actual farmer initialization
  - Import: `github.com/ArchivasNetwork/archivas/farmer`, `pospace`, `rpc`
  - Load/generate farmer key
  - Scan plots directory
  - Connect to node RPC
  - Start farming loop

### 4. Reference Implementation
See `/home/iljanemesis/archivas/cmd/archivas-node/main.go` and `/home/iljanemesis/archivas/cmd/archivas-farmer/main.go` for reference on how to initialize and run the node and farmer.

## Testing

### Build
```bash
cd build && cmake .. && make
```

### Run
```bash
./archivas-qt
```

### Verify
1. Application launches
2. Welcome message appears on first run
3. Node starts automatically (check logs)
4. Farmer starts automatically after node (check logs)
5. Overview page shows node and farmer status
6. Logs appear in Node and Farmer pages
7. Directories are created automatically

## User Flow

1. **First Launch**:
   - User downloads and runs the app
   - Config file doesn't exist → first-run setup triggered
   - Directories created automatically
   - Default config created
   - Welcome message shown
   - Node starts automatically
   - Farmer starts automatically (1 second delay)

2. **Subsequent Launches**:
   - Config file exists → load existing config
   - Node starts automatically (if autoStart is true)
   - Farmer starts automatically (if autoStart is true)
   - No user interaction required

3. **Configuration**:
   - User can open Settings to modify configuration
   - User can disable auto-start if desired
   - User can change network, RPC bind, plots path, etc.
   - Manual Start/Stop buttons available for manual control

## Files Modified

- `src/qt/configmanager.cpp`: Added first-run setup, directory creation, default config
- `src/qt/mainwindow.cpp`: Added auto-start on launch, welcome message
- `src/go/bridge/node.go`: Improved placeholder with status updates
- `src/go/bridge/farmer.go`: Improved placeholder with status updates
- `include/qt/configmanager.h`: Added first-run setup methods

## Status

✅ **Complete**: Out-of-the-box configuration and auto-start
⏳ **Pending**: Integration of actual Archivas node/farmer code (placeholder works, real code needs to be integrated)

